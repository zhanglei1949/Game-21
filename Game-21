// number game;
#include <iostream>
#include <string>
#include <sstream>
#include <ctime> 
#include <cstdlib> //get all the lib in;
using namespace std;
string cor(int n); //define a function returns a string;
void sort(int poker[52]);//define a function to sort out the cards;
float calcu(int a);//calculate the corresponding value of card
int man(float sum1,string inf1);
void com(float sum1,float sum2,string inf2);
int poker[52];
int j=2,count1=2,count2=2;
float sum1,sum2;
int main(){
	srand(time(NULL));
	string inf1;
	string inf2;
	int i;
    for (i=0;i<52;++i){
    	poker[i]=i;
    }
	sort(poker);
	inf1=cor(poker[0]);
	sum1+=calcu(poker[0]);
	inf1+=cor(poker[1]);
	sum1+=calcu(poker[1]);
	cout<<"For human players:"
	cout<<"You got:"<<inf1<<endl; 
    sum1=man(sum1,inf1);
	if (sum1>0){
    	cout<<"sum1 "<<sum1<<endl;
    	for (i=0;i<2;++i){
    		++j;
            inf2+=cor(poker[j]);
            sum2+=calcu(poker[j]);
		}
		cout<<"For comouter player:"
        cout<<"Computer got:"<<inf2<<endl;
    	com (sum1,sum2,inf2);
    }
    cout<<"cout1 "<<count1<<" count2 "<<count2<<endl;
    return 0;
} 
string cor(int n){
	string inf;
	stringstream ss;
	switch (n/13){
		case 0: inf+="Spade\t"; break; 
		case 1: inf+="Heart\t"; break;
		case 2: inf+="Club\t";  break;
		case 3: inf+="Diamond\t";  break;
	}
	switch (n%13){
		case 0 : inf+="A"; break;
		case 10: inf+="J"; break; 
		case 11: inf+="Q"; break;
		case 12: inf+="K";  break;	
	}
	if ((n%13)>0&&(n%13)<10){
		ss<< (n+1)%13 ;
		inf += ss.str();
	}
	return (inf+" "); 
}
void sort(int poker[52]){
	int k,l,m;
	srand(time(NULL));
	for (k=51;k>0;--k){
		l=rand()%k+0;
		m=poker[k];
		poker[k]=poker[l];
		poker[l]=m;
	}
}
float calcu(int a){
	float num;
    if (a%13==10||a%13==11||a%13==12) num=0.5; 
    else if(a%13>=0&&a%13<=9) num=(a%13)+1; 
    return num;
}
int man(float sum1,string inf1){
	char jud;
	while (true){	
		cout<<"Do you want one more card?(Y/N)"<<endl;
		cin>>jud;
		while ((jud!='Y'&&jud!='N')||cin.fail()){
			cout<<"Please enter Y or N:"<<endl;
			cin>>jud;
		}
		if (jud=='N') {
			break;
		} 
		else if (jud=='Y'){ 
		  ++j;
		  ++count1;
		  inf1+=cor(poker[j]);
	      sum1+=calcu(poker[j]);
		  cout<<"You now have:"<<inf1<<endl;
		}
		if (sum1>21){
			sum1=-1;
			cout<<sum1<<endl;
			cout<<"You lose!"<<endl;
			break;
		} 
	}
	cout<<"sum1 is"<<sum1<<endl;
	return sum1;
}
void com(float sum1,float sum2,string inf2){
	++j;
	while (true){
		if (fabs(sum2-21)<0.01&&fabs(sum1-21)>0.01){
			cout<<"You lose!"<<endl;
			break;
		}
		if(fabs(sum2-21)<0.01&&fabs(sum1-21)<0.01){
			if (count1>count2) {
				cout<<"you lose!" ;break;
			}
			else if (count1==count2) {
				cout <<"No winner this round";break;
			}
			else if (count1<count2) cout <<"you win!";break;
		}
		if (sum2>21){
			cout<<"you win!"<<endl;break;
		}
		if (sum2<21){
			if (sum2>sum1) {
				cout<<sum2<<" "<<sum1<<endl;
				cout<<"You lose!"<<endl;break;
			}
			else if (sum2<sum1){
				++j;
				++count2;
				inf2+=cor(poker[j]);
				sum2+=calcu(poker[j]);
				cout<<"Computer now have:"<<inf2<<endl; 
			}
			else if (sum2>sum1){
				if (count1>count2) {
					cout<<"you lose!"<<endl;break;
				}
				else {
					j++;
					++count2;
					inf2+=cor(poker[j]);
				    sum2+=calcu(poker[j]);
					cout<<"computer now have:"<<inf2<<endl; 
				}
			}
		}
	cout<<"sum2 "<<sum2<<" "<<j<<endl;	
	}
	cout<<"count1"<<count1<<"count2"<<count2<<endl;

}
